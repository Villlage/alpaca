{"ast":null,"code":"import _regeneratorRuntime from\"/Users/gilad/code/commitmuse/client/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/gilad/code/commitmuse/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/Users/gilad/code/commitmuse/client/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useLayoutEffect,useState}from'react';import'./style.scss';import PageContent from'../../../../../modules/common/PageContent';import Field from'../../../../../components/Field';import Tabs from'../../../../../components/Tabs';import Status from'../../../../../modules/common/Status';import IsaService from'../../../../../../services/isa.service';import Loader from'../../../../../components/Loader';import{makeName}from'../../../../../../helpers/base';import Message from'../../../../../components/Message';var isaService=new IsaService();export default function IsaOverview(props){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),isa=_useState2[0],set_isa=_useState2[1];var _useState3=useState('ISA OFFER'),_useState4=_slicedToArray(_useState3,2),active_tab=_useState4[0],set_active_tab=_useState4[1];var _useState5=useState(''),_useState6=_slicedToArray(_useState5,2),request_error=_useState6[0],set_request_error=_useState6[1];var _useState7=useState(true),_useState8=_slicedToArray(_useState7,2),loading=_useState8[0],set_loading=_useState8[1];var isa_id=props.match.params.id;var fetchIsa=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var res;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:set_loading(true);_context.prev=1;_context.next=4;return isaService.getIsaById(isa_id);case 4:res=_context.sent;if(!res.error){_context.next=9;break;}set_loading(false);set_request_error(res.error);return _context.abrupt(\"return\",setTimeout(function(){return set_request_error('');},3000));case 9:set_isa(res);set_loading(false);_context.next=18;break;case 13:_context.prev=13;_context.t0=_context[\"catch\"](1);set_loading(false);set_request_error(_context.t0.error||_context.t0.toString());return _context.abrupt(\"return\",setTimeout(function(){return set_request_error('');},3000));case 18:case\"end\":return _context.stop();}}},_callee,null,[[1,13]]);}));return function fetchIsa(){return _ref.apply(this,arguments);};}();useLayoutEffect(function(){fetchIsa();},[]);return/*#__PURE__*/React.createElement(\"article\",{className:\"IsaOverview-page\"},loading?/*#__PURE__*/React.createElement(Loader,null):isa&&/*#__PURE__*/React.createElement(PageContent,null,/*#__PURE__*/React.createElement(\"h1\",{className:\"page-title\"},makeName(isa.student)),/*#__PURE__*/React.createElement(\"section\",{className:\"form\"},/*#__PURE__*/React.createElement(Tabs,{tabs:['overview','isa offer'],onChange:function onChange(tab){return set_active_tab(tab);},activeTab:active_tab}),active_tab==='overview'?/*#__PURE__*/React.createElement(\"div\",{className:\"overview\"},/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"label\",null,\"Total Paid\"),/*#__PURE__*/React.createElement(\"p\",null,\"0 USD\",/*#__PURE__*/React.createElement(\"span\",null,\"of \",isa.cap,\" USD\"))),/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"label\",null,\"Last Payment\"),/*#__PURE__*/React.createElement(\"p\",null,\"N/A\")),/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"label\",null,\"Current Income\"),/*#__PURE__*/React.createElement(\"p\",null,\"$\",isa.current_income,\" / YEAR\")),/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"label\",null,\"Previous Income\"),/*#__PURE__*/React.createElement(\"p\",null,\"$\",isa.current_income,\" / YEAR\"))):/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(Status,{selected:isa.status}),/*#__PURE__*/React.createElement(\"div\",{className:\"fields\"},/*#__PURE__*/React.createElement(Field,{title:\"company\"},makeName(props.currentUser)),/*#__PURE__*/React.createElement(Field,{title:\"Client\"},makeName(isa.student)),/*#__PURE__*/React.createElement(Field,{className:\"full\",title:\"Current Income\"},\"$\",isa.current_income,\" / YEAR\"),/*#__PURE__*/React.createElement(Field,{className:\"full\",title:\"time to be paid\"},isa.time_to_be_paid||'-',\" Month(s)\"),/*#__PURE__*/React.createElement(Field,{className:\"full\",title:\"Percentage to be paid\"},isa.percentage||'-',\"%\"),/*#__PURE__*/React.createElement(Field,{className:\"full\",title:\"Description\"},isa.description||'-'),/*#__PURE__*/React.createElement(Field,{className:\"full\",title:\"Cancellation Period\"},isa.cancellation_period_weeks||'-',\" week(s)\")))),/*#__PURE__*/React.createElement(Message,{message:request_error})));}","map":{"version":3,"sources":["/Users/gilad/code/commitmuse/client/src/app/pages/public/company/my-isa/isa-overview/index.tsx"],"names":["React","useLayoutEffect","useState","PageContent","Field","Tabs","Status","IsaService","Loader","makeName","Message","isaService","IsaOverview","props","isa","set_isa","active_tab","set_active_tab","request_error","set_request_error","loading","set_loading","isa_id","match","params","id","fetchIsa","getIsaById","res","error","setTimeout","toString","student","tab","cap","current_income","status","currentUser","time_to_be_paid","percentage","description","cancellation_period_weeks"],"mappings":"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","sourcesContent":["import React, { useLayoutEffect, useState } from 'react'\nimport './style.scss'\nimport { ScreenProps } from '../../../../../../interfaces/baseIntefaces'\nimport PageContent from '../../../../../modules/common/PageContent'\nimport Field from '../../../../../components/Field'\nimport Tabs from '../../../../../components/Tabs'\nimport Status from '../../../../../modules/common/Status'\nimport IsaService from '../../../../../../services/isa.service'\nimport Loader from '../../../../../components/Loader'\nimport { makeName } from '../../../../../../helpers/base'\nimport Message from '../../../../../components/Message'\n\ninterface IsaOverviewProps extends ScreenProps {\n  match: any\n}\n\nconst isaService = new IsaService()\n\nexport default function IsaOverview(props: IsaOverviewProps) {\n  const [isa, set_isa] = useState<any>([])\n  const [active_tab, set_active_tab] = useState('ISA OFFER')\n  const [request_error, set_request_error] = useState('')\n  const [loading, set_loading] = useState(true)\n\n  const isa_id = props.match.params.id\n\n  const fetchIsa = async () => {\n    set_loading(true)\n    try {\n      const res = await isaService.getIsaById(isa_id)\n\n      if (res.error) {\n        set_loading(false)\n        set_request_error(res.error)\n        return setTimeout(() => set_request_error(''), 3000)\n      }\n\n      set_isa(res)\n      set_loading(false)\n    } catch (e) {\n      set_loading(false)\n      set_request_error(e.error || e.toString())\n      return setTimeout(() => set_request_error(''), 3000)\n    }\n  }\n\n  useLayoutEffect(() => {\n    fetchIsa()\n  }, [])\n\n  return (\n    <article className=\"IsaOverview-page\">\n      {loading ? (\n        <Loader />\n      ) : (\n        isa && (\n          <PageContent>\n            <h1 className=\"page-title\">{makeName(isa.student)}</h1>\n            <section className=\"form\">\n              <Tabs tabs={['overview', 'isa offer']} onChange={tab => set_active_tab(tab)} activeTab={active_tab} />\n              {active_tab === 'overview' ? (\n                <div className=\"overview\">\n                  <div>\n                    <label>Total Paid</label>\n                    <p>\n                      0 USD\n                      <span>of {isa.cap} USD</span>\n                    </p>\n                  </div>\n                  <div>\n                    <label>Last Payment</label>\n                    <p>\n                      {/*1,250 USD*/}\n                      {/*<span>August 8th 2020</span>*/}\n                      N/A\n                    </p>\n                  </div>\n                  <div>\n                    <label>Current Income</label>\n                    {/*<p>95K / YEAR</p>*/}\n                    <p>${isa.current_income} / YEAR</p>\n                  </div>\n                  <div>\n                    <label>Previous Income</label>\n                    {/*<p>95K / YEAR</p>*/}\n                    <p>${isa.current_income} / YEAR</p>\n                  </div>\n                </div>\n              ) : (\n                <>\n                  <Status selected={isa.status} />\n                  <div className=\"fields\">\n                    <Field title=\"company\">{makeName(props.currentUser)}</Field>\n                    <Field title=\"Client\">{makeName(isa.student)}</Field>\n                    <Field className=\"full\" title=\"Current Income\">\n                      ${isa.current_income} / YEAR\n                    </Field>\n                    <Field className=\"full\" title=\"time to be paid\">\n                      {isa.time_to_be_paid || '-'} Month(s)\n                    </Field>\n                    <Field className=\"full\" title=\"Percentage to be paid\">\n                      {isa.percentage || '-'}%\n                    </Field>\n                    <Field className=\"full\" title=\"Description\">\n                      {isa.description || '-'}\n                    </Field>\n                    <Field className=\"full\" title=\"Cancellation Period\">\n                      {isa.cancellation_period_weeks || '-'} week(s)\n                    </Field>\n                  </div>\n                </>\n              )}\n            </section>\n            <Message message={request_error} />\n          </PageContent>\n        )\n      )}\n    </article>\n  )\n}\n"]},"metadata":{},"sourceType":"module"}