{"ast":null,"code":"import _objectSpread from\"/Users/gilad/code/commitmuse/client/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _regeneratorRuntime from\"/Users/gilad/code/commitmuse/client/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/gilad/code/commitmuse/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/Users/gilad/code/commitmuse/client/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useLayoutEffect,useState}from'react';import'./style.scss';import PageContent from'../../../../../modules/common/PageContent';import MenuSideBar from'../../../../../modules/company/MenuSideBar';import Icon from'../../../../../components/Icon';import Button from'../../../../../components/Button';import PopUp from'../../../../../components/PopUp';import Input from'../../../../../components/Input';import Select from'../../../../../components/Select/Select';import CompanyService from'../../../../../../services/company.service';import{makeName,notEmptyArray}from'../../../../../../helpers/base';var companyService=new CompanyService();export default function CompanyCoaches(props){var _useState=useState(true),_useState2=_slicedToArray(_useState,2),loading=_useState2[0],set_loading=_useState2[1];var _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),request_error=_useState4[0],set_request_error=_useState4[1];var _useState5=useState([]),_useState6=_slicedToArray(_useState5,2),coaches=_useState6[0],set_coaches=_useState6[1];var _useState7=useState(false),_useState8=_slicedToArray(_useState7,2),show_new_coach_popup=_useState8[0],set_show_new_coach_popup=_useState8[1];var _useState9=useState({first_name:'',email:''}),_useState10=_slicedToArray(_useState9,2),coach=_useState10[0],set_coach=_useState10[1];var getCoaches=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var res;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return companyService.coaches(props.currentUser.company);case 3:res=_context.sent;set_loading(false);if(!(res&&res.error||res.err_msg)){_context.next=8;break;}set_request_error(res.error||res.err_msg);return _context.abrupt(\"return\",setTimeout(function(){return set_request_error('');},3000));case 8:set_coaches(res);_context.next=16;break;case 11:_context.prev=11;_context.t0=_context[\"catch\"](0);set_loading(false);set_request_error(_context.t0.error||_context.t0.toString());setTimeout(function(){return set_request_error('');},3000);case 16:case\"end\":return _context.stop();}}},_callee,null,[[0,11]]);}));return function getCoaches(){return _ref.apply(this,arguments);};}();useLayoutEffect(function(){getCoaches();},[]);return/*#__PURE__*/React.createElement(\"article\",{className:\"CompanyCoaches-page\"},/*#__PURE__*/React.createElement(MenuSideBar,null),/*#__PURE__*/React.createElement(PageContent,{error:request_error},/*#__PURE__*/React.createElement(\"header\",null,/*#__PURE__*/React.createElement(\"h2\",{className:\"page-title\"},\"Coaches\"),/*#__PURE__*/React.createElement(Button,{background:\"MainWarning\",onClick:function onClick(){return set_show_new_coach_popup(true);}},/*#__PURE__*/React.createElement(Icon,{icon:\"plus\"}),\" New Coach\")),/*#__PURE__*/React.createElement(\"section\",{className:\"coaches\"},notEmptyArray(coaches)&&coaches.map(function(coach,i){return/*#__PURE__*/React.createElement(\"div\",{className:\"coach\",key:i},/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(Icon,{icon:\"person\"}),/*#__PURE__*/React.createElement(\"h2\",null,coach.type,\" \",/*#__PURE__*/React.createElement(\"span\",null,makeName(coach)))),/*#__PURE__*/React.createElement(Icon,{icon:\"chevron-right\"}));})),/*#__PURE__*/React.createElement(PopUp,{isOpen:show_new_coach_popup,onClose:function onClose(){return set_show_new_coach_popup(false);}},/*#__PURE__*/React.createElement(\"section\",{className:\"new-coach\"},/*#__PURE__*/React.createElement(\"header\",null,/*#__PURE__*/React.createElement(\"h2\",null,\"Invite someone to join Company Name\"),/*#__PURE__*/React.createElement(Input,{onChange:function onChange(e){return set_coach(_objectSpread({},coach,{first_name:e}));},value:coach.first_name,placeholder:\"First Name\"}),/*#__PURE__*/React.createElement(Input,{onChange:function onChange(e){return set_coach(_objectSpread({},coach,{email:e}));},value:coach.email,placeholder:\"Email Address\"}),/*#__PURE__*/React.createElement(Button,{background:\"MainWarning\"},\"SEND INVITE\")),/*#__PURE__*/React.createElement(\"footer\",null,coaches.map(function(coach,i){return/*#__PURE__*/React.createElement(\"div\",{className:\"coach\",key:i},/*#__PURE__*/React.createElement(\"h2\",null,makeName(coach),\" \",/*#__PURE__*/React.createElement(\"span\",null,coach.email)),/*#__PURE__*/React.createElement(Select,{value:\"Coach\",options:[''],onChange:function onChange(e){return e;},placeholder:\"Coach\"}));}))))));}","map":{"version":3,"sources":["/Users/gilad/code/commitmuse/client/src/app/pages/public/company/dashboard/coaches/index.tsx"],"names":["React","useLayoutEffect","useState","PageContent","MenuSideBar","Icon","Button","PopUp","Input","Select","CompanyService","makeName","notEmptyArray","companyService","CompanyCoaches","props","loading","set_loading","request_error","set_request_error","coaches","set_coaches","show_new_coach_popup","set_show_new_coach_popup","first_name","email","coach","set_coach","getCoaches","currentUser","company","res","error","err_msg","setTimeout","toString","map","i","type","e"],"mappings":"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","sourcesContent":["import React, { useLayoutEffect, useState } from 'react'\nimport './style.scss'\nimport { Coach, ScreenProps } from '../../../../../../interfaces/baseIntefaces'\nimport PageContent from '../../../../../modules/common/PageContent'\nimport MenuSideBar from '../../../../../modules/company/MenuSideBar'\nimport Icon from '../../../../../components/Icon'\nimport Button from '../../../../../components/Button'\nimport PopUp from '../../../../../components/PopUp'\nimport Input from '../../../../../components/Input'\nimport Select from '../../../../../components/Select/Select'\nimport CompanyService from '../../../../../../services/company.service'\nimport Message from '../../../../../components/Message'\nimport { makeName, notEmptyArray } from '../../../../../../helpers/base'\n\nconst companyService = new CompanyService()\n\ninterface CompanyCoachesProps extends ScreenProps {}\n\nexport default function CompanyCoaches(props: CompanyCoachesProps) {\n  const [loading, set_loading] = useState<boolean>(true)\n  const [request_error, set_request_error] = useState<any>('')\n  const [coaches, set_coaches] = useState<Coach[]>([])\n  const [show_new_coach_popup, set_show_new_coach_popup] = useState(false)\n  const [coach, set_coach] = useState({\n    first_name: '',\n    email: '',\n  })\n\n  const getCoaches = async () => {\n    try {\n      const res = await companyService.coaches(props.currentUser.company)\n      set_loading(false)\n\n      if ((res && res.error) || res.err_msg) {\n        set_request_error(res.error || res.err_msg)\n        return setTimeout(() => set_request_error(''), 3000)\n      }\n\n      set_coaches(res)\n    } catch (e) {\n      set_loading(false)\n      set_request_error(e.error || e.toString())\n      setTimeout(() => set_request_error(''), 3000)\n    }\n  }\n\n  useLayoutEffect(() => {\n    getCoaches()\n  }, [])\n\n  return (\n    <article className=\"CompanyCoaches-page\">\n      <MenuSideBar />\n      <PageContent error={request_error}>\n        <header>\n          <h2 className=\"page-title\">Coaches</h2>\n          <Button background=\"MainWarning\" onClick={() => set_show_new_coach_popup(true)}>\n            <Icon icon=\"plus\" /> New Coach\n          </Button>\n        </header>\n        <section className=\"coaches\">\n          {notEmptyArray(coaches) &&\n            coaches.map((coach, i) => (\n              <div className=\"coach\" key={i}>\n                <div>\n                  <Icon icon=\"person\" />\n                  <h2>\n                    {coach.type} <span>{makeName(coach)}</span>\n                  </h2>\n                </div>\n                <Icon icon=\"chevron-right\" />\n              </div>\n            ))}\n        </section>\n        <PopUp isOpen={show_new_coach_popup} onClose={() => set_show_new_coach_popup(false)}>\n          <section className=\"new-coach\">\n            <header>\n              <h2>Invite someone to join Company Name</h2>\n              <Input\n                onChange={e => set_coach({ ...coach, first_name: e })}\n                value={coach.first_name}\n                placeholder=\"First Name\"\n              />\n              <Input\n                onChange={e => set_coach({ ...coach, email: e })}\n                value={coach.email}\n                placeholder=\"Email Address\"\n              />\n              <Button background=\"MainWarning\">SEND INVITE</Button>\n            </header>\n            <footer>\n              {coaches.map((coach, i) => (\n                <div className=\"coach\" key={i}>\n                  <h2>\n                    {makeName(coach)} <span>{coach.email}</span>\n                  </h2>\n                  <Select value=\"Coach\" options={['']} onChange={e => e} placeholder=\"Coach\" />\n                </div>\n              ))}\n            </footer>\n          </section>\n        </PopUp>\n      </PageContent>\n    </article>\n  )\n}\n"]},"metadata":{},"sourceType":"module"}