{"ast":null,"code":"var _jsxFileName = \"/Users/gilad/code/commitmuse/client/src/app/pages/public/client/isa-offer-steps/review/index.tsx\";\nimport React, { useState } from 'react';\nimport './style.scss';\nimport PageHeader from '../../../../../modules/common/PageHeader';\nimport PageContent from '../../../../../modules/common/PageContent';\nimport FAQ from '../../../../../modules/company/CreateIsa/FAQ';\nimport IsaOfferReview from '../../../../../modules/client/IsaOfferReview';\nimport OfferStatus from '../../../../../modules/client/OfferStatus';\nimport ClientIsaSignUp from '../sign-up';\nimport { usePlaidLink } from 'react-plaid-link';\nimport PlaidService from '../../../../../../services/plaid.service';\nimport Message from '../../../../../components/Message';\nimport Button from '../../../../../components/Button';\nconst plaidService = new PlaidService();\nconst offerStatuses = ['review offer', 'sign up', 'link bank', 'sign contract'];\nexport default function ClientIsaOffer(props) {\n  const [offer_step, set_offer_step] = useState(0);\n  const [request_error, set_request_error] = useState('');\n\n  const onSuccess = async (token, metadata) => {\n    try {\n      const res = await plaidService.createItem(token, metadata);\n\n      if (res) {\n        if (res.error) {\n          set_offer_step(offer_step - 1);\n          set_request_error(res.error);\n          setTimeout(() => set_request_error(''), 3000);\n        } else {\n          props.history.push(`/isa/${res.id || 1}`);\n        }\n      }\n    } catch (e) {\n      set_offer_step(offer_step - 1);\n      set_request_error(e.error || e.toString());\n      setTimeout(() => set_request_error(''), 3000);\n    }\n  };\n\n  const handleSignUp = async () => {\n    set_offer_step(offer_step + 1);\n    await props.fetchUser();\n    open();\n  };\n\n  const config = {\n    clientName: 'Commit Muse',\n    env: 'sandbox',\n    product: ['auth', 'transactions'],\n    publicKey: 'a004a070f0629da694fbae916414f3',\n    onSuccess: onSuccess\n  };\n  const {\n    open,\n    ready,\n    error\n  } = usePlaidLink(config);\n  const offer_strategy = {\n    'review offer': /*#__PURE__*/React.createElement(IsaOfferReview, {\n      onNext: () => {\n        set_offer_step(offer_step + 1);\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 62,\n        columnNumber: 7\n      }\n    }),\n    'sign up': /*#__PURE__*/React.createElement(ClientIsaSignUp, {\n      onNext: handleSignUp,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 68,\n        columnNumber: 16\n      }\n    }),\n    'link bank': /*#__PURE__*/React.createElement(\"section\", {\n      className: \"link_bank\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 70,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(Button, {\n      background: \"MainWarning\",\n      onClick: () => open(),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 71,\n        columnNumber: 9\n      }\n    }, \"Link Bank\"))\n  };\n  return /*#__PURE__*/React.createElement(\"article\", {\n    className: \"ClientIsaOffer-page\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(PageHeader, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(PageContent, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"section\", {\n    className: \"offer-steps\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(OfferStatus, {\n    statuses: offerStatuses,\n    activeIndex: offer_step,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 83,\n      columnNumber: 11\n    }\n  }), offer_strategy[offerStatuses[offer_step]]), /*#__PURE__*/React.createElement(FAQ, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 9\n    }\n  })), /*#__PURE__*/React.createElement(Message, {\n    message: request_error,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 7\n    }\n  }));\n}","map":{"version":3,"sources":["/Users/gilad/code/commitmuse/client/src/app/pages/public/client/isa-offer-steps/review/index.tsx"],"names":["React","useState","PageHeader","PageContent","FAQ","IsaOfferReview","OfferStatus","ClientIsaSignUp","usePlaidLink","PlaidService","Message","Button","plaidService","offerStatuses","ClientIsaOffer","props","offer_step","set_offer_step","request_error","set_request_error","onSuccess","token","metadata","res","createItem","error","setTimeout","history","push","id","e","toString","handleSignUp","fetchUser","open","config","clientName","env","product","publicKey","ready","offer_strategy"],"mappings":"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","sourcesContent":["import React, { useState } from 'react'\nimport './style.scss'\nimport { PlaidMetadata, ScreenProps } from '../../../../../../interfaces/baseIntefaces'\nimport PageHeader from '../../../../../modules/common/PageHeader'\nimport PageContent from '../../../../../modules/common/PageContent'\nimport FAQ from '../../../../../modules/company/CreateIsa/FAQ'\nimport IsaOfferReview from '../../../../../modules/client/IsaOfferReview'\nimport OfferStatus from '../../../../../modules/client/OfferStatus'\nimport ClientIsaSignUp from '../sign-up'\nimport { usePlaidLink } from 'react-plaid-link'\nimport PlaidService from '../../../../../../services/plaid.service'\nimport Message from '../../../../../components/Message'\nimport Button from '../../../../../components/Button'\n\nconst plaidService = new PlaidService()\nconst offerStatuses = ['review offer', 'sign up', 'link bank', 'sign contract']\n\ninterface ClientIsaOfferProps extends ScreenProps {}\n\nexport default function ClientIsaOffer(props: ClientIsaOfferProps) {\n  const [offer_step, set_offer_step] = useState(0)\n  const [request_error, set_request_error] = useState('')\n\n  const onSuccess = async (token: string, metadata: PlaidMetadata) => {\n    try {\n      const res = await plaidService.createItem(token, metadata)\n\n      if (res) {\n        if (res.error) {\n          set_offer_step(offer_step - 1)\n          set_request_error(res.error)\n          setTimeout(() => set_request_error(''), 3000)\n        } else {\n          props.history.push(`/isa/${res.id || 1}`)\n        }\n      }\n    } catch (e) {\n      set_offer_step(offer_step - 1)\n      set_request_error(e.error || e.toString())\n      setTimeout(() => set_request_error(''), 3000)\n    }\n  }\n\n  const handleSignUp = async () => {\n    set_offer_step(offer_step + 1)\n    await props.fetchUser()\n    open()\n  }\n\n  const config = {\n    clientName: 'Commit Muse',\n    env: 'sandbox',\n    product: ['auth', 'transactions'],\n    publicKey: 'a004a070f0629da694fbae916414f3',\n    onSuccess: onSuccess,\n  }\n\n  const { open, ready, error } = usePlaidLink(config)\n\n  const offer_strategy: any = {\n    'review offer': (\n      <IsaOfferReview\n        onNext={() => {\n          set_offer_step(offer_step + 1)\n        }}\n      />\n    ),\n    'sign up': <ClientIsaSignUp onNext={handleSignUp} />,\n    'link bank': (\n      <section className=\"link_bank\">\n        <Button background=\"MainWarning\" onClick={() => open()}>\n          Link Bank\n        </Button>\n      </section>\n    ),\n  }\n\n  return (\n    <article className=\"ClientIsaOffer-page\">\n      <PageHeader />\n      <PageContent>\n        <section className=\"offer-steps\">\n          <OfferStatus statuses={offerStatuses} activeIndex={offer_step} />\n          {offer_strategy[offerStatuses[offer_step]]}\n        </section>\n        <FAQ />\n      </PageContent>\n      <Message message={request_error} />\n    </article>\n  )\n}"]},"metadata":{},"sourceType":"module"}