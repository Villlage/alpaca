{"ast":null,"code":"var _jsxFileName = \"/Users/gilad/code/commitmuse/client/src/app/pages/public/auth/sign-in/index.tsx\";\nimport React, { useState } from 'react';\nimport './style.scss';\nimport PageContent from '../../../../modules/common/PageContent';\nimport Input from '../../../../components/Input';\nimport Icon from '../../../../components/Icon';\nimport { validateEmail } from '../../../../../helpers/base';\nimport { log } from '../../../../../services/logging.service';\nimport AuthService from '../../../../../services/auth.service';\nimport { emailErrorMessage, passwordLength } from '../../../../../constants/auth';\nimport Button from '../../../../components/Button';\nimport Message from '../../../../components/Message';\nimport { Link } from 'react-router-dom';\nconst authService = new AuthService();\nexport default function SignIn(props) {\n  const [user, set_user] = useState({\n    email: '',\n    password: ''\n  });\n  const [loading, set_loading] = useState(false);\n  const [request_error, set_request_error] = useState('');\n  const [error, set_error] = useState({\n    email: '',\n    password: ''\n  });\n\n  const notValid = () => Object.values(user).some(i => i === '') || !validateEmail(user.email) || user.password.length < 6;\n\n  const onSubmit = async () => {\n    set_loading(true);\n\n    try {\n      const res = await authService.login(user);\n\n      if (res) {\n        if (res.error) {\n          set_loading(false);\n          set_request_error(res.error);\n          return setTimeout(() => set_request_error(''), 3000);\n        }\n\n        await props.fetchUser();\n        set_loading(false);\n        return props.history.push('/my-isa');\n      }\n    } catch (e) {\n      set_loading(false);\n      log('Error on sign in: ', e);\n      set_request_error(e.error || e.toString);\n      return setTimeout(() => set_request_error(''), 3000);\n    }\n  };\n\n  return /*#__PURE__*/React.createElement(\"article\", {\n    className: \"SignIn-page\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 60,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(PageContent, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"logo\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 62,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"img\", {\n    src: \"/web/assets/icons/rocket.svg\",\n    alt: \"logo\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 11\n    }\n  }), /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 11\n    }\n  }, \"Logo\")), /*#__PURE__*/React.createElement(\"h2\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 66,\n      columnNumber: 9\n    }\n  }, \"Login\"), /*#__PURE__*/React.createElement(\"section\", {\n    className: \"form\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"fields\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(Input, {\n    icon: \"mail\",\n    placeholder: \"Email Address\",\n    error: error.email,\n    value: user.email,\n    onChange: e => {\n      set_error({ ...error,\n        email: ''\n      });\n      set_user({ ...user,\n        email: e\n      });\n      !validateEmail(e) && set_error({ ...error,\n        email: emailErrorMessage\n      });\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(Input, {\n    icon: \"key\",\n    placeholder: \"Password\",\n    type: \"password\",\n    error: error.password,\n    value: user.password,\n    onChange: e => {\n      set_error({ ...error,\n        password: ''\n      });\n      set_user({ ...user,\n        password: e\n      });\n      e.length < 6 && set_error({ ...error,\n        password: passwordLength\n      });\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 13\n    }\n  })), /*#__PURE__*/React.createElement(\"footer\", {\n    className: \"full\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 93,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 94,\n      columnNumber: 13\n    }\n  }, \"Don't have an account?\", ' ', /*#__PURE__*/React.createElement(Link, {\n    to: \"/register\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 96,\n      columnNumber: 15\n    }\n  }, \"Sign Up\")), /*#__PURE__*/React.createElement(Button, {\n    disabled: notValid(),\n    onClick: onSubmit,\n    loading: loading,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 99,\n      columnNumber: 13\n    }\n  }, \"Login \", /*#__PURE__*/React.createElement(Icon, {\n    icon: \"arrow-right\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 100,\n      columnNumber: 21\n    }\n  }), ' ')))), request_error.length > 0 && /*#__PURE__*/React.createElement(Message, {\n    message: request_error,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 105,\n      columnNumber: 36\n    }\n  }));\n}","map":{"version":3,"sources":["/Users/gilad/code/commitmuse/client/src/app/pages/public/auth/sign-in/index.tsx"],"names":["React","useState","PageContent","Input","Icon","validateEmail","log","AuthService","emailErrorMessage","passwordLength","Button","Message","Link","authService","SignIn","props","user","set_user","email","password","loading","set_loading","request_error","set_request_error","error","set_error","notValid","Object","values","some","i","length","onSubmit","res","login","setTimeout","fetchUser","history","push","e","toString"],"mappings":"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","sourcesContent":["import React, { useState } from 'react'\nimport './style.scss'\nimport { ScreenProps } from '../../../../../interfaces/baseIntefaces'\nimport PageContent from '../../../../modules/common/PageContent'\nimport Input from '../../../../components/Input'\nimport Icon from '../../../../components/Icon'\nimport { validateEmail } from '../../../../../helpers/base'\nimport { log } from '../../../../../services/logging.service'\nimport AuthService from '../../../../../services/auth.service'\nimport { emailErrorMessage, passwordLength } from '../../../../../constants/auth'\nimport Button from '../../../../components/Button'\nimport Message from '../../../../components/Message'\nimport { Link } from 'react-router-dom'\n\nconst authService = new AuthService()\n\nexport default function SignIn(props: ScreenProps) {\n  const [user, set_user] = useState({\n    email: '',\n    password: '',\n  })\n\n  const [loading, set_loading] = useState(false)\n  const [request_error, set_request_error] = useState('')\n\n  const [error, set_error] = useState({\n    email: '',\n    password: '',\n  })\n\n  const notValid = () =>\n    Object.values(user).some(i => i === '') || !validateEmail(user.email) || user.password.length < 6\n\n  const onSubmit = async () => {\n    set_loading(true)\n    try {\n      const res = await authService.login(user)\n\n      if (res) {\n        if (res.error) {\n          set_loading(false)\n          set_request_error(res.error)\n          return setTimeout(() => set_request_error(''), 3000)\n        }\n\n        await props.fetchUser()\n        set_loading(false)\n\n        return props.history.push('/my-isa')\n      }\n    } catch (e) {\n      set_loading(false)\n      log('Error on sign in: ', e)\n      set_request_error(e.error || e.toString)\n      return setTimeout(() => set_request_error(''), 3000)\n    }\n  }\n\n  return (\n    <article className=\"SignIn-page\">\n      <PageContent>\n        <div className=\"logo\">\n          <img src=\"/web/assets/icons/rocket.svg\" alt=\"logo\" />\n          <p>Logo</p>\n        </div>\n        <h2>Login</h2>\n        <section className=\"form\">\n          <div className=\"fields\">\n            <Input\n              icon=\"mail\"\n              placeholder=\"Email Address\"\n              error={error.email}\n              value={user.email}\n              onChange={e => {\n                set_error({ ...error, email: '' })\n                set_user({ ...user, email: e })\n                !validateEmail(e) && set_error({ ...error, email: emailErrorMessage })\n              }}\n            />\n            <Input\n              icon=\"key\"\n              placeholder=\"Password\"\n              type=\"password\"\n              error={error.password}\n              value={user.password}\n              onChange={e => {\n                set_error({ ...error, password: '' })\n                set_user({ ...user, password: e })\n                e.length < 6 && set_error({ ...error, password: passwordLength })\n              }}\n            />\n          </div>\n          <footer className=\"full\">\n            <p>\n              Don't have an account?{' '}\n              <Link to=\"/register\">Sign Up</Link>\n            </p>\n\n            <Button disabled={notValid()} onClick={onSubmit} loading={loading}>\n              Login <Icon icon=\"arrow-right\" />{' '}\n            </Button>\n          </footer>\n        </section>\n      </PageContent>\n      {request_error.length > 0 && <Message message={request_error} />}\n    </article>\n  )\n}"]},"metadata":{},"sourceType":"module"}