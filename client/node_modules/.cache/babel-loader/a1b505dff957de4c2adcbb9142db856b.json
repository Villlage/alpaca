{"ast":null,"code":"import _regeneratorRuntime from\"/Users/gilad/code/commitmuse/client/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/gilad/code/commitmuse/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/Users/gilad/code/commitmuse/client/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import*as React from'react';import'./style.scss';import{Link,useHistory}from'react-router-dom';import Icon from'../../../components/Icon';import Button from'../../../components/Button';import{useState}from'react';import AuthService from'../../../../services/auth.service';import{log}from'../../../../services/logging.service';var authService=new AuthService();export default function PageHeader(props){var _useState=useState(false),_useState2=_slicedToArray(_useState,2),show_menu=_useState2[0],set_show_menu=_useState2[1];var history=useHistory();var onLogout=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return authService.signOut();case 3:props.setCurrentUser(null);history.push('/login');_context.next=10;break;case 7:_context.prev=7;_context.t0=_context[\"catch\"](0);log(_context.t0);case 10:case\"end\":return _context.stop();}}},_callee,null,[[0,7]]);}));return function onLogout(){return _ref.apply(this,arguments);};}();return/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(\"header\",{className:\"PageHeader-module\"},/*#__PURE__*/React.createElement(\"nav\",null,/*#__PURE__*/React.createElement(\"div\",{className:\"logo\",onClick:function onClick(){if(props.user){return props.user.company?history.push('/company/dashboard'):history.push('/my-isa');}history.push('/login');}},/*#__PURE__*/React.createElement(\"img\",{src:\"/web/assets/images/logo.png\",alt:\"logo\"})),props.user&&props.user.user_role===1&&/*#__PURE__*/React.createElement(Link,{className:\"switch\",to:'/admin/users'},\"Admin portal\"),/*#__PURE__*/React.createElement(\"div\",{className:\"profile\"},props.user?/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(Icon,{icon:\"bell\",className:\"notification\"}),/*#__PURE__*/React.createElement(Link,{to:\"/settings\"},/*#__PURE__*/React.createElement(Icon,{icon:\"gear\"}),\" Settings\"),/*#__PURE__*/React.createElement(\"div\",{className:\"auth-menu\",onClick:function onClick(){return set_show_menu(!show_menu);}},props.user.profile_picture_link&&props.user.profile_picture_link.length>6?/*#__PURE__*/React.createElement(\"img\",{src:props.user.profile_picture_link,className:\"profile_pic\",alt:\"profile_pic\"}):/*#__PURE__*/React.createElement(\"div\",{className:\"initials\"},/*#__PURE__*/React.createElement(\"h2\",null,props.user.first_name[0],props.user.last_name[0])),/*#__PURE__*/React.createElement(Icon,{style:{marginLeft:6},icon:\"caret-down\"}),show_menu&&/*#__PURE__*/React.createElement(\"div\",{className:\"hidden-menu\"},/*#__PURE__*/React.createElement(Button,{onClick:onLogout},\"Logout\")))):/*#__PURE__*/React.createElement(Link,{to:\"/login\"},/*#__PURE__*/React.createElement(Button,null,\"Sign in\")))),/*#__PURE__*/React.createElement(\"div\",{className:\"top-wrapper\"})));}","map":{"version":3,"sources":["/Users/gilad/code/commitmuse/client/src/app/modules/common/PageHeader/index.tsx"],"names":["React","Link","useHistory","Icon","Button","useState","AuthService","log","authService","PageHeader","props","show_menu","set_show_menu","history","onLogout","signOut","setCurrentUser","push","user","company","user_role","profile_picture_link","length","first_name","last_name","marginLeft"],"mappings":"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","sourcesContent":["import * as React from 'react'\nimport './style.scss'\nimport { Link, useHistory } from 'react-router-dom'\nimport { User } from '../../../../interfaces/baseIntefaces'\nimport Icon from '../../../components/Icon'\nimport Button from '../../../components/Button'\nimport { useState } from 'react'\nimport AuthService from '../../../../services/auth.service'\nimport { log } from '../../../../services/logging.service'\n\nconst authService = new AuthService()\n\ninterface PageHeaderProps {\n  user?: User\n  setCurrentUser(u: User | null): void\n}\n\nexport default function PageHeader(props: PageHeaderProps) {\n  const [show_menu, set_show_menu] = useState(false)\n  const history = useHistory()\n\n  const onLogout = async () => {\n    try {\n      await authService.signOut()\n      props.setCurrentUser(null)\n      history.push('/login')\n    } catch (e) {\n      log(e)\n    }\n  }\n\n  return (\n    <>\n      <header className=\"PageHeader-module\">\n        <nav>\n          <div\n            className=\"logo\"\n            onClick={() => {\n              if (props.user) {\n                return props.user.company ? history.push('/company/dashboard') : history.push('/my-isa')\n              }\n              history.push('/login')\n            }}\n          >\n            <img src=\"/web/assets/images/logo.png\" alt=\"logo\" />\n          </div>\n          {props.user && props.user.user_role === 1 && (\n            <Link className=\"switch\" to={'/admin/users'}>\n              Admin portal\n            </Link>\n          )}\n          <div className=\"profile\">\n            {props.user ? (\n              <>\n                <Icon icon=\"bell\" className=\"notification\" />\n                <Link to=\"/settings\">\n                  <Icon icon=\"gear\" /> Settings\n                </Link>\n                <div className=\"auth-menu\" onClick={() => set_show_menu(!show_menu)}>\n                  {props.user.profile_picture_link && props.user.profile_picture_link.length > 6 ? (\n                    <img src={props.user.profile_picture_link} className=\"profile_pic\" alt=\"profile_pic\" />\n                  ) : (\n                    <div className=\"initials\">\n                      <h2>\n                        {props.user.first_name[0]}\n                        {props.user.last_name[0]}\n                      </h2>\n                    </div>\n                  )}\n                  <Icon style={{ marginLeft: 6 }} icon=\"caret-down\" />\n                  {show_menu && (\n                    <div className=\"hidden-menu\">\n                      <Button onClick={onLogout}>Logout</Button>\n                    </div>\n                  )}\n                </div>\n              </>\n            ) : (\n              <Link to=\"/login\">\n                <Button>Sign in</Button>\n              </Link>\n            )}\n          </div>\n        </nav>\n        <div className=\"top-wrapper\" />\n      </header>\n    </>\n  )\n}\n"]},"metadata":{},"sourceType":"module"}