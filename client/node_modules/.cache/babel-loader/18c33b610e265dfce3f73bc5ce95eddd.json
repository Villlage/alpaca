{"ast":null,"code":"import _regeneratorRuntime from\"/Users/gilad/code/commitmuse/client/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/gilad/code/commitmuse/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/Users/gilad/code/commitmuse/client/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useLayoutEffect,useState}from'react';import Routes from'./Routes';import{Provider}from'react-redux';import store from'./redux/store';import UserService from'./services/user.service';import Loader from'./app/components/Loader';import{log}from'./services/logging.service';var configStore=store();var userService=new UserService();function App(){var _useState=useState(null),_useState2=_slicedToArray(_useState,2),user=_useState2[0],setUser=_useState2[1];var fetchUser=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var res,_user;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return userService.checkAuth();case 3:res=_context.sent;if(!res){_context.next=11;break;}_context.next=7;return userService.getCurrentUser();case 7:_user=_context.sent;return _context.abrupt(\"return\",setUser(_user));case 11:return _context.abrupt(\"return\",setUser(undefined));case 12:_context.next=18;break;case 14:_context.prev=14;_context.t0=_context[\"catch\"](0);log('Error getting current user: ',_context.t0);// setUser(undefined)\nreturn _context.abrupt(\"return\",setUser({id:1,first_name:'Amy',last_name:'Owens',phone_number:'555555',user_role:0,confirmed_at:'',email:'sample@mail.com',is_active:true,profile_picture:'/assets/images/amy_owens.svg',profile_picture_link:'/assets/images/amy_owens.svg',created_at:'',updated_at:'',hourly_rate:40}));case 18:case\"end\":return _context.stop();}}},_callee,null,[[0,14]]);}));return function fetchUser(){return _ref.apply(this,arguments);};}();useLayoutEffect(function(){fetchUser();},[]);return user!==null?/*#__PURE__*/React.createElement(Provider,{store:configStore},/*#__PURE__*/React.createElement(Routes,{currentUser:user,fetchUser:fetchUser})):/*#__PURE__*/React.createElement(Loader,null);}export default App;","map":{"version":3,"sources":["/Users/gilad/code/commitmuse/client/src/App.tsx"],"names":["React","useLayoutEffect","useState","Routes","Provider","store","UserService","Loader","log","configStore","userService","App","user","setUser","fetchUser","checkAuth","res","getCurrentUser","undefined","id","first_name","last_name","phone_number","user_role","confirmed_at","email","is_active","profile_picture","profile_picture_link","created_at","updated_at","hourly_rate"],"mappings":"+VAAA,MAAOA,CAAAA,KAAP,EAAgBC,eAAhB,CAAiCC,QAAjC,KAAiD,OAAjD,CACA,MAAOC,CAAAA,MAAP,KAAmB,UAAnB,CACA,OAASC,QAAT,KAAyB,aAAzB,CACA,MAAOC,CAAAA,KAAP,KAAkB,eAAlB,CACA,MAAOC,CAAAA,WAAP,KAAwB,yBAAxB,CACA,MAAOC,CAAAA,MAAP,KAAmB,yBAAnB,CACA,OAASC,GAAT,KAAoB,4BAApB,CAGA,GAAMC,CAAAA,WAAgB,CAAGJ,KAAK,EAA9B,CACA,GAAMK,CAAAA,WAAW,CAAG,GAAIJ,CAAAA,WAAJ,EAApB,CAEA,QAASK,CAAAA,GAAT,EAAe,eACWT,QAAQ,CAA0B,IAA1B,CADnB,wCACNU,IADM,eACAC,OADA,eAEb,GAAMC,CAAAA,SAAS,0FAAG,uLAEIJ,CAAAA,WAAW,CAACK,SAAZ,EAFJ,QAERC,GAFQ,mBAGVA,GAHU,gDAION,CAAAA,WAAW,CAACO,cAAZ,EAJP,QAINL,KAJM,+CAKLC,OAAO,CAACD,KAAD,CALF,0CAOLC,OAAO,CAACK,SAAD,CAPF,2FAUdV,GAAG,CAAC,8BAAD,aAAH,CACA;AAXc,gCAYPK,OAAO,CAAC,CACbM,EAAE,CAAE,CADS,CAEbC,UAAU,CAAE,KAFC,CAGbC,SAAS,CAAE,OAHE,CAIbC,YAAY,CAAE,QAJD,CAKbC,SAAS,CAAE,CALE,CAMbC,YAAY,CAAE,EAND,CAObC,KAAK,CAAE,iBAPM,CAQbC,SAAS,CAAE,IARE,CASbC,eAAe,CAAE,8BATJ,CAUbC,oBAAoB,CAAE,8BAVT,CAWbC,UAAU,CAAE,EAXC,CAYbC,UAAU,CAAE,EAZC,CAabC,WAAW,CAAE,EAbA,CAAD,CAZA,uEAAH,kBAATjB,CAAAA,SAAS,0CAAf,CA8BAb,eAAe,CAAC,UAAM,CACpBa,SAAS,GACV,CAFc,CAEZ,EAFY,CAAf,CAIA,MAAOF,CAAAA,IAAI,GAAK,IAAT,cACL,oBAAC,QAAD,EAAU,KAAK,CAAEH,WAAjB,eACE,oBAAC,MAAD,EAAQ,WAAW,CAAEG,IAArB,CAA2B,SAAS,CAAEE,SAAtC,EADF,CADK,cAKL,oBAAC,MAAD,MALF,CAOD,CAED,cAAeH,CAAAA,GAAf","sourcesContent":["import React, { useLayoutEffect, useState } from 'react'\nimport Routes from './Routes'\nimport { Provider } from 'react-redux'\nimport store from './redux/store'\nimport UserService from './services/user.service'\nimport Loader from './app/components/Loader'\nimport { log } from './services/logging.service'\nimport { User } from './interfaces/baseIntefaces'\n\nconst configStore: any = store()\nconst userService = new UserService()\n\nfunction App() {\n  const [user, setUser] = useState<User | null | undefined>(null)\n  const fetchUser = async () => {\n    try {\n      const res = await userService.checkAuth()\n      if (res) {\n        const user = await userService.getCurrentUser()\n        return setUser(user)\n      } else {\n        return setUser(undefined)\n      }\n    } catch (e) {\n      log('Error getting current user: ', e)\n      // setUser(undefined)\n      return setUser({\n        id: 1,\n        first_name: 'Amy',\n        last_name: 'Owens',\n        phone_number: '555555',\n        user_role: 0,\n        confirmed_at: '',\n        email: 'sample@mail.com',\n        is_active: true,\n        profile_picture: '/assets/images/amy_owens.svg',\n        profile_picture_link: '/assets/images/amy_owens.svg',\n        created_at: '',\n        updated_at: '',\n        hourly_rate: 40\n      })\n    }\n  }\n\n  useLayoutEffect(() => {\n    fetchUser()\n  }, [])\n\n  return user !== null ? (\n    <Provider store={configStore}>\n      <Routes currentUser={user} fetchUser={fetchUser} />\n    </Provider>\n  ) : (\n    <Loader />\n  )\n}\n\nexport default App\n"]},"metadata":{},"sourceType":"module"}