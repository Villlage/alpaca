{"ast":null,"code":"import _toConsumableArray from\"/Users/gilad/code/commitmuse/client/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _regeneratorRuntime from\"/Users/gilad/code/commitmuse/client/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/gilad/code/commitmuse/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/Users/gilad/code/commitmuse/client/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useLayoutEffect,useState}from'react';import'./style.scss';import PageContent from'../../../../../modules/common/PageContent';import Icon from'../../../../../components/Icon';import{notEmptyArray}from'../../../../../../helpers/base';import CompanyService from'../../../../../../services/company.service';import Loader from'../../../../../components/Loader';import Select from'../../../../../components/Select/Select';import IsaStatus from'../../../../../modules/company/MyIsa/IsaStatus';import{Link}from'react-router-dom';import PlaidService from'../../../../../../services/plaid.service';import Button from'../../../../../components/Button';var companyService=new CompanyService();var plaidService=new PlaidService();export default function CompanyIsas(props){var _useState=useState(''),_useState2=_slicedToArray(_useState,2),filter=_useState2[0],set_filter=_useState2[1];var _useState3=useState(true),_useState4=_slicedToArray(_useState3,2),loading=_useState4[0],set_loading=_useState4[1];var _useState5=useState(''),_useState6=_slicedToArray(_useState5,2),request_error=_useState6[0],set_request_error=_useState6[1];var _useState7=useState([]),_useState8=_slicedToArray(_useState7,2),isas=_useState8[0],set_isas=_useState8[1];var getIsas=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var res;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return companyService.isas(props.currentUser.company);case 3:res=_context.sent;set_loading(false);if(!(res&&res.error||res.err_msg)){_context.next=8;break;}set_request_error(res.error||res.err_msg);return _context.abrupt(\"return\",setTimeout(function(){return set_request_error('');},3000));case 8:set_isas(res);_context.next=16;break;case 11:_context.prev=11;_context.t0=_context[\"catch\"](0);set_loading(false);set_request_error(_context.t0.error||_context.t0.toString());setTimeout(function(){return set_request_error('');},3000);case 16:case\"end\":return _context.stop();}}},_callee,null,[[0,11]]);}));return function getIsas(){return _ref.apply(this,arguments);};}();useLayoutEffect(function(){getIsas();},[]);return loading?/*#__PURE__*/React.createElement(Loader,null):/*#__PURE__*/React.createElement(\"article\",{className:\"CompanyIsas-page\"},/*#__PURE__*/React.createElement(PageContent,{error:request_error},/*#__PURE__*/React.createElement(\"header\",{className:\"page-header\"},/*#__PURE__*/React.createElement(\"h1\",{className:\"page-title\"},\"My ISA\\u2019s\"),notEmptyArray(isas)&&/*#__PURE__*/React.createElement(Select,{value:filter,options:['View all','active','paying','completed'],onChange:function onChange(e){return set_filter(e);},placeholder:'View all'})),notEmptyArray(isas)?/*#__PURE__*/React.createElement(\"section\",{className:\"my_isa\"},/*#__PURE__*/React.createElement(\"div\",{className:\"list\"},[].concat(_toConsumableArray(isas),_toConsumableArray(isas)).filter(function(i){return i.status.includes(filter==='View all'?'':filter);}).map(function(isa,index){return/*#__PURE__*/React.createElement(IsaStatus,{onClick:function onClick(){return props.history.push('isas/'+isa.id);},key:index,name:isa.student.first_name+' '+isa.student.last_name,status:isa.status});})),/*#__PURE__*/React.createElement(Link,{to:\"isas/create\",className:\"new_isa\"},/*#__PURE__*/React.createElement(Icon,{icon:\"new_isa_plus\"}),\"NEW ISA\")):/*#__PURE__*/React.createElement(\"section\",{className:\"empty-isa\"},/*#__PURE__*/React.createElement(\"div\",{className:\"icon\"},/*#__PURE__*/React.createElement(Icon,{icon:\"empty_isa\"})),/*#__PURE__*/React.createElement(\"h2\",null,\"You have no ISA offers.\"),/*#__PURE__*/React.createElement(\"div\",{className:\"text_with_icon\"},/*#__PURE__*/React.createElement(\"p\",null,\"Start by creating a new one.\"),/*#__PURE__*/React.createElement(Icon,{icon:\"arrow_to_button\"})),/*#__PURE__*/React.createElement(Button,{onClick:function onClick(){return props.history.push('isas/create');},className:\"new_isa\"},/*#__PURE__*/React.createElement(Icon,{icon:\"new_isa_plus\"}),\"NEW ISA\"))));}","map":{"version":3,"sources":["/Users/gilad/code/commitmuse/client/src/app/pages/public/company/dashboard/my-isas/index.tsx"],"names":["React","useLayoutEffect","useState","PageContent","Icon","notEmptyArray","CompanyService","Loader","Select","IsaStatus","Link","PlaidService","Button","companyService","plaidService","CompanyIsas","props","filter","set_filter","loading","set_loading","request_error","set_request_error","isas","set_isas","getIsas","currentUser","company","res","error","err_msg","setTimeout","toString","e","i","status","includes","map","isa","index","history","push","id","student","first_name","last_name"],"mappings":"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","sourcesContent":["import React, { useLayoutEffect, useState } from 'react'\nimport './style.scss'\nimport { ISA, ScreenProps } from '../../../../../../interfaces/baseIntefaces'\nimport MenuSideBar from '../../../../../modules/company/MenuSideBar'\nimport PageContent from '../../../../../modules/common/PageContent'\nimport Icon from '../../../../../components/Icon'\nimport { notEmptyArray } from '../../../../../../helpers/base'\nimport CompanyService from '../../../../../../services/company.service'\nimport Loader from '../../../../../components/Loader'\nimport Select from '../../../../../components/Select/Select'\nimport IsaStatus from '../../../../../modules/company/MyIsa/IsaStatus'\nimport { Link } from 'react-router-dom'\nimport PlaidService from '../../../../../../services/plaid.service'\nimport Button from '../../../../../components/Button'\n\nconst companyService = new CompanyService()\nconst plaidService = new PlaidService()\n\ninterface CompanyIsasProps extends ScreenProps {}\n\nexport default function CompanyIsas(props: CompanyIsasProps) {\n  const [filter, set_filter] = useState('')\n  const [loading, set_loading] = useState<boolean>(true)\n  const [request_error, set_request_error] = useState<any>('')\n  const [isas, set_isas] = useState<ISA[]>([])\n\n  const getIsas = async () => {\n    try {\n      const res = await companyService.isas(props.currentUser.company)\n      set_loading(false)\n\n      if ((res && res.error) || res.err_msg) {\n        set_request_error(res.error || res.err_msg)\n        return setTimeout(() => set_request_error(''), 3000)\n      }\n\n      set_isas(res)\n    } catch (e) {\n      set_loading(false)\n      set_request_error(e.error || e.toString())\n      setTimeout(() => set_request_error(''), 3000)\n    }\n  }\n\n  useLayoutEffect(() => {\n    getIsas()\n  }, [])\n\n  return loading ? (\n    <Loader />\n  ) : (\n    <article className=\"CompanyIsas-page\">\n      <PageContent error={request_error}>\n        <header className=\"page-header\">\n          <h1 className=\"page-title\">My ISAâ€™s</h1>\n          {notEmptyArray(isas) && (\n            <Select\n              value={filter}\n              options={['View all', 'active', 'paying', 'completed']}\n              onChange={e => set_filter(e)}\n              placeholder={'View all'}\n            />\n          )}\n        </header>\n        {notEmptyArray(isas) ? (\n          <section className=\"my_isa\">\n            <div className=\"list\">\n              {[...isas, ...isas]\n                .filter((i: any) => i.status.includes(filter === 'View all' ? '' : filter))\n                .map((isa: any, index: number) => (\n                  <IsaStatus\n                    onClick={() => props.history.push('isas/' + isa.id)}\n                    key={index}\n                    name={isa.student.first_name + ' ' + isa.student.last_name}\n                    status={isa.status}\n                  />\n                ))}\n            </div>\n            <Link to=\"isas/create\" className=\"new_isa\">\n              <Icon icon=\"new_isa_plus\" />\n              NEW ISA\n            </Link>\n          </section>\n        ) : (\n          <section className=\"empty-isa\">\n            <div className=\"icon\">\n              <Icon icon=\"empty_isa\" />\n            </div>\n            <h2>You have no ISA offers.</h2>\n            <div className=\"text_with_icon\">\n              <p>Start by creating a new one.</p>\n              <Icon icon=\"arrow_to_button\" />\n            </div>\n            <Button onClick={() => props.history.push('isas/create')} className=\"new_isa\">\n              <Icon icon=\"new_isa_plus\" />\n              NEW ISA\n            </Button>\n          </section>\n        )}\n      </PageContent>\n    </article>\n  )\n}\n"]},"metadata":{},"sourceType":"module"}