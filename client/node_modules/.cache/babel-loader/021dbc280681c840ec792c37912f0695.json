{"ast":null,"code":"import _regeneratorRuntime from\"/Users/gilad/code/commitmuse/client/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/gilad/code/commitmuse/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/Users/gilad/code/commitmuse/client/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState}from'react';import PageContent from'../../../../../../../modules/common/PageContent';import Stepper from'../../../../../../../modules/common/Stepper';import FAQ from'../../../../../../../modules/company/CreateIsa/FAQ';import Message from'../../../../../../../components/Message';import ContractStep from'../../../../../../../modules/company/CreateIsa/ContractStep/ContractStep';import IsaService from'../../../../../../../../services/isa.service';var isaService=new IsaService();var OFFER_STEPS=['client','program','isa offer','review','contract'];export default function SignContract(props){var _useState=useState(''),_useState2=_slicedToArray(_useState,2),request_error=_useState2[0],set_request_error=_useState2[1];var onSign=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var res;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return isaService.docusignLogin(props.match.params.id);case 3:_context.next=5;return isaService.signIsa(props.match.params.id);case 5:res=_context.sent;if(!(res&&res.error)){_context.next=9;break;}set_request_error(res.error);return _context.abrupt(\"return\",setTimeout(function(){return set_request_error('');},3000));case 9:if(!res){_context.next=11;break;}return _context.abrupt(\"return\",window.location.href=res.url);case 11:_context.next=17;break;case 13:_context.prev=13;_context.t0=_context[\"catch\"](0);set_request_error(_context.t0.error||_context.t0.toString());setTimeout(function(){return set_request_error('');},3000);case 17:case\"end\":return _context.stop();}}},_callee,null,[[0,13]]);}));return function onSign(){return _ref.apply(this,arguments);};}();return/*#__PURE__*/React.createElement(\"article\",{className:\"CompanyCreateIsa-page\"},/*#__PURE__*/React.createElement(PageContent,null,/*#__PURE__*/React.createElement(\"h1\",{className:\"page-title\"},\"New ISA Offer\"),/*#__PURE__*/React.createElement(\"section\",{className:\"container\"},/*#__PURE__*/React.createElement(\"section\",{className:\"offer-steps\"},/*#__PURE__*/React.createElement(Stepper,{steps:OFFER_STEPS,activeIndex:4}),/*#__PURE__*/React.createElement(ContractStep,{onNext:onSign})),/*#__PURE__*/React.createElement(\"section\",{className:\"faq-and-calc\"},/*#__PURE__*/React.createElement(FAQ,null)))),/*#__PURE__*/React.createElement(Message,{message:request_error}));}","map":{"version":3,"sources":["/Users/gilad/code/commitmuse/client/src/app/pages/public/company/dashboard/my-isas/create-isa/sign-contract/index.tsx"],"names":["React","useState","PageContent","Stepper","FAQ","Message","ContractStep","IsaService","isaService","OFFER_STEPS","SignContract","props","request_error","set_request_error","onSign","docusignLogin","match","params","id","signIsa","res","error","setTimeout","window","location","href","url","toString"],"mappings":"+VAAA,MAAOA,CAAAA,KAAP,EAAgBC,QAAhB,KAAgC,OAAhC,CACA,MAAOC,CAAAA,WAAP,KAAwB,iDAAxB,CACA,MAAOC,CAAAA,OAAP,KAAoB,6CAApB,CACA,MAAOC,CAAAA,GAAP,KAAgB,oDAAhB,CACA,MAAOC,CAAAA,OAAP,KAAoB,yCAApB,CACA,MAAOC,CAAAA,YAAP,KAAyB,0EAAzB,CACA,MAAOC,CAAAA,UAAP,KAAuB,8CAAvB,CAEA,GAAMC,CAAAA,UAAU,CAAG,GAAID,CAAAA,UAAJ,EAAnB,CAEA,GAAME,CAAAA,WAAW,CAAG,CAAC,QAAD,CAAW,SAAX,CAAsB,WAAtB,CAAmC,QAAnC,CAA6C,UAA7C,CAApB,CAOA,cAAe,SAASC,CAAAA,YAAT,CAAsBC,KAAtB,CAAgD,eAClBV,QAAQ,CAAC,EAAD,CADU,wCACtDW,aADsD,eACvCC,iBADuC,eAG7D,GAAMC,CAAAA,MAAM,0FAAG,iLAELN,CAAAA,UAAU,CAACO,aAAX,CAAyBJ,KAAK,CAACK,KAAN,CAAYC,MAAZ,CAAmBC,EAA5C,CAFK,8BAGOV,CAAAA,UAAU,CAACW,OAAX,CAAmBR,KAAK,CAACK,KAAN,CAAYC,MAAZ,CAAmBC,EAAtC,CAHP,QAGLE,GAHK,oBAIPA,GAAG,EAAIA,GAAG,CAACC,KAJJ,0BAKTR,iBAAiB,CAACO,GAAG,CAACC,KAAL,CAAjB,CALS,gCAMFC,UAAU,CAAC,iBAAMT,CAAAA,iBAAiB,CAAC,EAAD,CAAvB,EAAD,CAA8B,IAA9B,CANR,aASPO,GATO,0DAUDG,MAAM,CAACC,QAAP,CAAgBC,IAAhB,CAAuBL,GAAG,CAACM,GAV1B,2FAaXb,iBAAiB,CAAC,YAAEQ,KAAF,EAAW,YAAEM,QAAF,EAAZ,CAAjB,CACAL,UAAU,CAAC,iBAAMT,CAAAA,iBAAiB,CAAC,EAAD,CAAvB,EAAD,CAA8B,IAA9B,CAAV,CAdW,qEAAH,kBAANC,CAAAA,MAAM,0CAAZ,CAkBA,mBACE,+BAAS,SAAS,CAAC,uBAAnB,eACE,oBAAC,WAAD,mBACE,0BAAI,SAAS,CAAC,YAAd,kBADF,cAEE,+BAAS,SAAS,CAAC,WAAnB,eACE,+BAAS,SAAS,CAAC,aAAnB,eACE,oBAAC,OAAD,EAAS,KAAK,CAAEL,WAAhB,CAA6B,WAAW,CAAE,CAA1C,EADF,cAEE,oBAAC,YAAD,EAAc,MAAM,CAAEK,MAAtB,EAFF,CADF,cAKE,+BAAS,SAAS,CAAC,cAAnB,eAOE,oBAAC,GAAD,MAPF,CALF,CAFF,CADF,cAmBE,oBAAC,OAAD,EAAS,OAAO,CAAEF,aAAlB,EAnBF,CADF,CAuBD","sourcesContent":["import React, { useState } from 'react'\nimport PageContent from '../../../../../../../modules/common/PageContent'\nimport Stepper from '../../../../../../../modules/common/Stepper'\nimport FAQ from '../../../../../../../modules/company/CreateIsa/FAQ'\nimport Message from '../../../../../../../components/Message'\nimport ContractStep from '../../../../../../../modules/company/CreateIsa/ContractStep/ContractStep'\nimport IsaService from '../../../../../../../../services/isa.service'\n\nconst isaService = new IsaService()\n\nconst OFFER_STEPS = ['client', 'program', 'isa offer', 'review', 'contract']\n\ninterface SignContractProps {\n  match: any\n  location: Location\n}\n\nexport default function SignContract(props: SignContractProps) {\n  const [request_error, set_request_error] = useState('')\n\n  const onSign = async () => {\n    try {\n      await isaService.docusignLogin(props.match.params.id)\n      const res = await isaService.signIsa(props.match.params.id)\n      if (res && res.error) {\n        set_request_error(res.error)\n        return setTimeout(() => set_request_error(''), 3000)\n      }\n\n      if (res) {\n        return (window.location.href = res.url)\n      }\n    } catch (e) {\n      set_request_error(e.error || e.toString())\n      setTimeout(() => set_request_error(''), 3000)\n    }\n  }\n\n  return (\n    <article className=\"CompanyCreateIsa-page\">\n      <PageContent>\n        <h1 className=\"page-title\">New ISA Offer</h1>\n        <section className=\"container\">\n          <section className=\"offer-steps\">\n            <Stepper steps={OFFER_STEPS} activeIndex={4} />\n            <ContractStep onNext={onSign} />\n          </section>\n          <section className=\"faq-and-calc\">\n            {/*<ISACalculator*/}\n            {/*  current_income={removeComma(total_income.current_income)}*/}\n            {/*  percentage={Number(total_income.percentage)}*/}\n            {/*  months={Number(total_income.time_to_be_paid)}*/}\n            {/*  max={removeComma(total_income.cap)}*/}\n            {/*/>*/}\n            <FAQ />\n          </section>\n        </section>\n      </PageContent>\n      <Message message={request_error} />\n    </article>\n  )\n}\n"]},"metadata":{},"sourceType":"module"}