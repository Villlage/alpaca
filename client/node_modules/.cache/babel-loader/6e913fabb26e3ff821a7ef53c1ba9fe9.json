{"ast":null,"code":"import _defineProperty from\"/Users/gilad/code/commitmuse/client/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _objectSpread from\"/Users/gilad/code/commitmuse/client/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _regeneratorRuntime from\"/Users/gilad/code/commitmuse/client/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/gilad/code/commitmuse/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _objectWithoutProperties from\"/Users/gilad/code/commitmuse/client/node_modules/@babel/runtime/helpers/esm/objectWithoutProperties\";import _slicedToArray from\"/Users/gilad/code/commitmuse/client/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState}from'react';import'./style.scss';import PageContent from'../../../../modules/common/PageContent';import Stepper from'../../../../modules/common/Stepper';import Select from'../../../../components/Select/Select';import Input from'../../../../components/Input';import Button from'../../../../components/Button';import CompanyService from'../../../../../services/company.service';import Message from'../../../../components/Message';import{usePlaidLink}from'react-plaid-link';import PlaidService from'../../../../../services/plaid.service';import{log}from'../../../../../services/logging.service';import currentEnv from'../../../../../config/environment';var companyService=new CompanyService();var plaidService=new PlaidService();var on_boarding_steps=['company details','link bank'];export default function CompanyOnBoarding(props){var _useState=useState(''),_useState2=_slicedToArray(_useState,2),request_error=_useState2[0],set_request_error=_useState2[1];var _useState3=useState(0),_useState4=_slicedToArray(_useState3,2),active_step=_useState4[0],set_active_step=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),loading=_useState6[0],set_loading=_useState6[1];var _useState7=useState({number_of_employees_estimate:'1',name:'',address_line_1:'',address_line_2:'',country:'',zip_code:'',city:'',state:''}),_useState8=_slicedToArray(_useState7,2),data=_useState8[0],set_data=_useState8[1];var notValid=function notValid(){var address_line_2=data.address_line_2,rest=_objectWithoutProperties(data,[\"address_line_2\"]);return Object.values(rest).some(function(v){return v.length===0;});};var onSuccess=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(token,metadata){var companyId,res,error;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;companyId=localStorage.getItem('companyId');_context.next=4;return plaidService.createCompanyItem(token,metadata,companyId);case 4:res=_context.sent;if(!res){_context.next=12;break;}error=res.error||res.err_msg;if(!error){_context.next=10;break;}set_request_error(res.error);return _context.abrupt(\"return\",setTimeout(function(){return set_request_error('');},3000));case 10:localStorage.removeItem('companyId');props.history.push(\"/company/subscription/\".concat(companyId));case 12:_context.next=18;break;case 14:_context.prev=14;_context.t0=_context[\"catch\"](0);set_request_error(_context.t0.error||_context.t0.toString());setTimeout(function(){return set_request_error('');},3000);case 18:case\"end\":return _context.stop();}}},_callee,null,[[0,14]]);}));return function onSuccess(_x,_x2){return _ref.apply(this,arguments);};}();var config={clientName:'Commit Muse',env:currentEnv().PLAID_ENV,product:['auth','transactions'],publicKey:currentEnv().PLAID_PUBLIC_KEY,onSuccess:onSuccess,token:props.plaid_token};var _usePlaidLink=usePlaidLink(config),open=_usePlaidLink.open;var onRegister=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){var res;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.prev=0;set_loading(true);_context2.next=4;return companyService.create({name:data.name,number_of_employees_estimate:data.number_of_employees_estimate,address:\"\".concat(data.address_line_1,\", \").concat(data.address_line_2,\", \").concat(data.country,\", \").concat(data.city,\", \").concat(data.state,\", \").concat(data.zip_code)});case 4:res=_context2.sent;if(!(res&&res.error||res.err_msg)){_context2.next=10;break;}log(res);set_loading(false);set_request_error(res.error||res.err_msg);return _context2.abrupt(\"return\",setTimeout(function(){return set_request_error('');},3000));case 10:localStorage.setItem('companyId',res.id);_context2.next=13;return props.fetchUser();case 13:set_loading(false);set_active_step(active_step+1);open();_context2.next=23;break;case 18:_context2.prev=18;_context2.t0=_context2[\"catch\"](0);set_loading(false);set_request_error(_context2.t0.error||_context2.t0.toString());setTimeout(function(){return set_request_error('');},3000);case 23:case\"end\":return _context2.stop();}}},_callee2,null,[[0,18]]);}));return function onRegister(){return _ref2.apply(this,arguments);};}();var _onChange=function onChange(e,key){set_data(_objectSpread({},data,_defineProperty({},key,e)));};var boarding_steps={0:/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(\"div\",{className:\"fields\"},/*#__PURE__*/React.createElement(Select,{icon:\"globe\",value:data.number_of_employees_estimate,options:['1','2-10','10-50','50+'],onChange:function onChange(e){return _onChange(e,'number_of_employees_estimate');},placeholder:\"Number of people in the company\"}),/*#__PURE__*/React.createElement(Input,{icon:\"building\",onChange:function onChange(e){return _onChange(e,'name');},value:data.name,placeholder:\"Company Name\"}),/*#__PURE__*/React.createElement(Input,{icon:\"location\",onChange:function onChange(e){return _onChange(e,'address_line_1');},value:data.address_line_1,placeholder:\"Address Line 1\"}),/*#__PURE__*/React.createElement(Input,{icon:\"location\",onChange:function onChange(e){return _onChange(e,'address_line_2');},value:data.address_line_2,placeholder:\"Address Line 2\"}),/*#__PURE__*/React.createElement(Input,{icon:\"globus\",onChange:function onChange(e){return _onChange(e,'country');},value:data.country,placeholder:\"Country\"}),/*#__PURE__*/React.createElement(\"div\",{className:\"zip-code\"},/*#__PURE__*/React.createElement(Input,{onChange:function onChange(e){return _onChange(e,'zip_code');},value:data.zip_code,placeholder:\"Zip Code\"}),/*#__PURE__*/React.createElement(Input,{onChange:function onChange(e){return _onChange(e,'city');},value:data.city,placeholder:\"City\"}),/*#__PURE__*/React.createElement(Input,{onChange:function onChange(e){return _onChange(e,'state');},value:data.state,placeholder:\"State\"}))),/*#__PURE__*/React.createElement(\"footer\",null,/*#__PURE__*/React.createElement(Button,{loading:loading,disabled:notValid(),onClick:onRegister,background:\"MainWarning\",icon:\"arrow-right\"},\"NEXT\"))),1:/*#__PURE__*/React.createElement(\"section\",{className:\"link_bank\"},/*#__PURE__*/React.createElement(Button,{background:\"MainWarning\",onClick:function onClick(){return open();}},\"Link Bank\"),/*#__PURE__*/React.createElement(Button,{className:\"skip\",onClick:function onClick(){return props.history.push(\"/company/subscription/\".concat(props.currentUser.company));}},\"Skip for later\"))};return/*#__PURE__*/React.createElement(\"article\",{className:\"CompanyOnBoarding-page\"},/*#__PURE__*/React.createElement(PageContent,null,/*#__PURE__*/React.createElement(\"h2\",null,\"Register\"),/*#__PURE__*/React.createElement(\"section\",{className:\"on_boarding-form\"},/*#__PURE__*/React.createElement(Stepper,{steps:on_boarding_steps,activeIndex:active_step}),boarding_steps[active_step],/*#__PURE__*/React.createElement(Message,{message:request_error}))));}","map":{"version":3,"sources":["/Users/gilad/code/commitmuse/client/src/app/pages/public/company/register/index.tsx"],"names":["React","useState","PageContent","Stepper","Select","Input","Button","CompanyService","Message","usePlaidLink","PlaidService","log","currentEnv","companyService","plaidService","on_boarding_steps","CompanyOnBoarding","props","request_error","set_request_error","active_step","set_active_step","loading","set_loading","number_of_employees_estimate","name","address_line_1","address_line_2","country","zip_code","city","state","data","set_data","notValid","rest","Object","values","some","v","length","onSuccess","token","metadata","companyId","localStorage","getItem","createCompanyItem","res","error","err_msg","setTimeout","removeItem","history","push","toString","config","clientName","env","PLAID_ENV","product","publicKey","PLAID_PUBLIC_KEY","plaid_token","open","onRegister","create","address","setItem","id","fetchUser","onChange","e","key","boarding_steps","currentUser","company"],"mappings":"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","sourcesContent":["import React, { useState } from 'react'\nimport './style.scss'\nimport { PlaidMetadata, ScreenProps } from '../../../../../interfaces/baseIntefaces'\nimport PageContent from '../../../../modules/common/PageContent'\nimport Stepper from '../../../../modules/common/Stepper'\nimport Select from '../../../../components/Select/Select'\nimport Input from '../../../../components/Input'\nimport Button from '../../../../components/Button'\nimport CompanyService from '../../../../../services/company.service'\nimport Message from '../../../../components/Message'\nimport { usePlaidLink } from 'react-plaid-link'\nimport PlaidService from '../../../../../services/plaid.service'\nimport { log } from '../../../../../services/logging.service'\nimport currentEnv from '../../../../../config/environment'\n\nconst companyService = new CompanyService()\nconst plaidService = new PlaidService()\n\nconst on_boarding_steps = ['company details', 'link bank']\n\ntype CompanyOnBoardingKeys =\n  | 'number_of_employees_estimate'\n  | 'name'\n  | 'address_line_1'\n  | 'address_line_2'\n  | 'country'\n  | 'zip_code'\n  | 'city'\n  | 'state'\n\ninterface CompanyOnBoardingProps extends ScreenProps {}\n\nexport default function CompanyOnBoarding(props: CompanyOnBoardingProps) {\n  const [request_error, set_request_error] = useState('')\n  const [active_step, set_active_step] = useState(0)\n  const [loading, set_loading] = useState(false)\n  const [data, set_data] = useState({\n    number_of_employees_estimate: '1',\n    name: '',\n    address_line_1: '',\n    address_line_2: '',\n    country: '',\n    zip_code: '',\n    city: '',\n    state: '',\n  })\n\n  const notValid = () => {\n    const { address_line_2, ...rest } = data\n    return Object.values(rest).some((v: any) => v.length === 0)\n  }\n\n  const onSuccess = async (token: string, metadata: PlaidMetadata) => {\n    try {\n      const companyId = localStorage.getItem('companyId')\n      const res = await plaidService.createCompanyItem(token, metadata, companyId as string)\n      if (res) {\n        const error = res.error || res.err_msg\n\n        if (error) {\n          set_request_error(res.error)\n          return setTimeout(() => set_request_error(''), 3000)\n        }\n        localStorage.removeItem('companyId')\n\n        props.history.push(`/company/subscription/${companyId}`)\n      }\n    } catch (e) {\n      set_request_error(e.error || e.toString())\n      setTimeout(() => set_request_error(''), 3000)\n    }\n  }\n\n  const config = {\n    clientName: 'Commit Muse',\n    env: currentEnv().PLAID_ENV,\n    product: ['auth', 'transactions'],\n    publicKey: currentEnv().PLAID_PUBLIC_KEY,\n    onSuccess: onSuccess,\n    token: props.plaid_token,\n  }\n\n  const { open } = usePlaidLink(config)\n\n  const onRegister = async () => {\n    try {\n      set_loading(true)\n      const res = await companyService.create({\n        name: data.name,\n        number_of_employees_estimate: data.number_of_employees_estimate,\n        address: `${data.address_line_1}, ${data.address_line_2}, ${data.country}, ${data.city}, ${data.state}, ${data.zip_code}`,\n      })\n\n      if ((res && res.error) || res.err_msg) {\n        log(res)\n        set_loading(false)\n        set_request_error(res.error || res.err_msg)\n        return setTimeout(() => set_request_error(''), 3000)\n      }\n      localStorage.setItem('companyId', res.id)\n      await props.fetchUser()\n      set_loading(false)\n\n      set_active_step(active_step + 1)\n      open()\n    } catch (e) {\n      set_loading(false)\n      set_request_error(e.error || e.toString())\n      setTimeout(() => set_request_error(''), 3000)\n    }\n  }\n\n  const onChange = (e: any, key: CompanyOnBoardingKeys) => {\n    set_data({ ...data, [key]: e })\n  }\n\n  const boarding_steps: any = {\n    0: (\n      <>\n        <div className=\"fields\">\n          <Select\n            icon=\"globe\"\n            value={data.number_of_employees_estimate}\n            options={['1', '2-10', '10-50', '50+']}\n            onChange={e => onChange(e, 'number_of_employees_estimate')}\n            placeholder=\"Number of people in the company\"\n          />\n          <Input icon=\"building\" onChange={e => onChange(e, 'name')} value={data.name} placeholder=\"Company Name\" />\n          <Input\n            icon=\"location\"\n            onChange={e => onChange(e, 'address_line_1')}\n            value={data.address_line_1}\n            placeholder=\"Address Line 1\"\n          />\n          <Input\n            icon=\"location\"\n            onChange={e => onChange(e, 'address_line_2')}\n            value={data.address_line_2}\n            placeholder=\"Address Line 2\"\n          />\n          <Input icon=\"globus\" onChange={e => onChange(e, 'country')} value={data.country} placeholder=\"Country\" />\n          <div className=\"zip-code\">\n            <Input onChange={e => onChange(e, 'zip_code')} value={data.zip_code} placeholder=\"Zip Code\" />\n            <Input onChange={e => onChange(e, 'city')} value={data.city} placeholder=\"City\" />\n            <Input onChange={e => onChange(e, 'state')} value={data.state} placeholder=\"State\" />\n          </div>\n        </div>\n        <footer>\n          <Button\n            loading={loading}\n            disabled={notValid()}\n            onClick={onRegister}\n            background=\"MainWarning\"\n            icon=\"arrow-right\"\n          >\n            NEXT\n          </Button>\n        </footer>\n      </>\n    ),\n    1: (\n      <section className=\"link_bank\">\n        <Button background=\"MainWarning\" onClick={() => open()}>\n          Link Bank\n        </Button>\n        <Button\n          className=\"skip\"\n          onClick={() => props.history.push(`/company/subscription/${props.currentUser.company}`)}\n        >\n          Skip for later\n        </Button>\n      </section>\n    ),\n  }\n\n  return (\n    <article className=\"CompanyOnBoarding-page\">\n      <PageContent>\n        <h2>Register</h2>\n        <section className=\"on_boarding-form\">\n          <Stepper steps={on_boarding_steps} activeIndex={active_step} />\n          {boarding_steps[active_step]}\n          <Message message={request_error} />\n        </section>\n      </PageContent>\n    </article>\n  )\n}\n"]},"metadata":{},"sourceType":"module"}