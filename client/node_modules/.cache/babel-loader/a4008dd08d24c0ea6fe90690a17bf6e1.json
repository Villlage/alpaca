{"ast":null,"code":"import _regeneratorRuntime from\"/Users/gilad/code/commitmuse/client/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/gilad/code/commitmuse/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/Users/gilad/code/commitmuse/client/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useLayoutEffect,useState}from'react';import'./style.scss';import PageContent from'../../../../modules/common/PageContent';import Icon from'../../../../components/Icon';import Loader from'../../../../components/Loader';import CompanyService from'../../../../../services/company.service';import{formatDate}from'../../../../../helpers/formattings';var companyService=new CompanyService();export default function CompanyDashboard(props){var _useState=useState(''),_useState2=_slicedToArray(_useState,2),request_error=_useState2[0],set_request_error=_useState2[1];var _useState3=useState(true),_useState4=_slicedToArray(_useState3,2),loading=_useState4[0],set_loading=_useState4[1];var _useState5=useState({coaches:null,isas:null,last_payment:{date:null,value:null},total_revenue:null}),_useState6=_slicedToArray(_useState5,2),data=_useState6[0],set_data=_useState6[1];var setData=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var res;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return companyService.overview(props.currentUser.company);case 3:res=_context.sent;set_loading(false);if(!(res&&res.error||res.err_msg)){_context.next=8;break;}set_request_error(res.error||res.err_msg);return _context.abrupt(\"return\",setTimeout(function(){return set_request_error('');},3000));case 8:set_data(res);_context.next=16;break;case 11:_context.prev=11;_context.t0=_context[\"catch\"](0);set_loading(false);set_request_error(_context.t0.error||_context.t0.toString());setTimeout(function(){return set_request_error('');},3000);case 16:case\"end\":return _context.stop();}}},_callee,null,[[0,11]]);}));return function setData(){return _ref.apply(this,arguments);};}();useLayoutEffect(function(){setData();},[]);return/*#__PURE__*/React.createElement(\"article\",{className:\"CompanyDashboard-page\"},loading?/*#__PURE__*/React.createElement(Loader,null):/*#__PURE__*/React.createElement(PageContent,{title:\"Overview\",error:request_error},/*#__PURE__*/React.createElement(\"section\",{className:\"boxes\"},/*#__PURE__*/React.createElement(\"section\",{className:\"total\"},/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"h2\",null,\"Total Revenue\"),/*#__PURE__*/React.createElement(\"p\",null,data.total_revenue,\" USD\")),/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"h2\",null,\"Last Payment\"),/*#__PURE__*/React.createElement(\"p\",null,data.last_payment.value,\" USD\",/*#__PURE__*/React.createElement(\"span\",null,data.last_payment.date?formatDate(data.last_payment.date):'-/-/-')))),/*#__PURE__*/React.createElement(\"section\",{className:\"counts\"},/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"h2\",null,data.coaches,/*#__PURE__*/React.createElement(\"span\",null,\"coaches\")),/*#__PURE__*/React.createElement(Icon,{icon:\"round_blue_user\"})),/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"h2\",null,\"- \",/*#__PURE__*/React.createElement(\"span\",null,\"isa offers completed\")),/*#__PURE__*/React.createElement(Icon,{icon:\"round_blue_doc\"})),/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"h2\",null,\"- \",/*#__PURE__*/React.createElement(\"span\",null,\"active Clients\")),/*#__PURE__*/React.createElement(Icon,{icon:\"round_blue_user\"})),/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"h2\",null,\"- \",/*#__PURE__*/React.createElement(\"span\",null,\"isa offers In Progress\")),/*#__PURE__*/React.createElement(Icon,{icon:\"round_blue_doc\"}))))));}","map":{"version":3,"sources":["/Users/gilad/code/commitmuse/client/src/app/pages/public/company/dashboard/index.tsx"],"names":["React","useLayoutEffect","useState","PageContent","Icon","Loader","CompanyService","formatDate","companyService","CompanyDashboard","props","request_error","set_request_error","loading","set_loading","coaches","isas","last_payment","date","value","total_revenue","data","set_data","setData","overview","currentUser","company","res","error","err_msg","setTimeout","toString"],"mappings":"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","sourcesContent":["import React, { useLayoutEffect, useState } from 'react'\nimport './style.scss'\nimport { ScreenProps } from '../../../../../interfaces/baseIntefaces'\nimport PageContent from '../../../../modules/common/PageContent'\nimport MenuSideBar from '../../../../modules/company/MenuSideBar'\nimport Icon from '../../../../components/Icon'\nimport Loader from '../../../../components/Loader'\nimport CompanyService from '../../../../../services/company.service'\nimport { formatDate } from '../../../../../helpers/formattings'\n\nconst companyService = new CompanyService()\n\ninterface CompanyDashboardProps extends ScreenProps {}\n\nexport default function CompanyDashboard(props: CompanyDashboardProps) {\n  const [request_error, set_request_error] = useState<any>('')\n  const [loading, set_loading] = useState<boolean>(true)\n  const [data, set_data] = useState({\n    coaches: null,\n    isas: null,\n    last_payment: { date: null, value: null },\n    total_revenue: null,\n  })\n\n  const setData = async () => {\n    try {\n      const res = await companyService.overview(props.currentUser.company)\n      set_loading(false)\n\n      if ((res && res.error) || res.err_msg) {\n        set_request_error(res.error || res.err_msg)\n        return setTimeout(() => set_request_error(''), 3000)\n      }\n\n      set_data(res)\n    } catch (e) {\n      set_loading(false)\n      set_request_error(e.error || e.toString())\n      setTimeout(() => set_request_error(''), 3000)\n    }\n  }\n\n  useLayoutEffect(() => {\n    setData()\n  }, [])\n\n  return (\n    <article className=\"CompanyDashboard-page\">\n      {loading ? (\n        <Loader />\n      ) : (\n        <PageContent title=\"Overview\" error={request_error}>\n          <section className=\"boxes\">\n            <section className=\"total\">\n              <div>\n                <h2>Total Revenue</h2>\n                <p>{data.total_revenue} USD</p>\n              </div>\n              <div>\n                <h2>Last Payment</h2>\n                <p>\n                  {data.last_payment.value} USD\n                  <span>{data.last_payment.date ? formatDate(data.last_payment.date as any) : '-/-/-'}</span>\n                </p>\n              </div>\n            </section>\n            <section className=\"counts\">\n              <div>\n                <h2>\n                  {data.coaches}\n                  <span>coaches</span>\n                </h2>\n                <Icon icon=\"round_blue_user\" />\n              </div>\n              <div>\n                <h2>\n                  - <span>isa offers completed</span>\n                </h2>\n                <Icon icon=\"round_blue_doc\" />\n              </div>\n              <div>\n                <h2>\n                  - <span>active Clients</span>\n                </h2>\n                <Icon icon=\"round_blue_user\" />\n              </div>\n              <div>\n                <h2>\n                  - <span>isa offers In Progress</span>\n                </h2>\n                <Icon icon=\"round_blue_doc\" />\n              </div>\n            </section>\n          </section>\n        </PageContent>\n      )}\n    </article>\n  )\n}\n"]},"metadata":{},"sourceType":"module"}