{"ast":null,"code":"import _regeneratorRuntime from\"/Users/gilad/code/commitmuse/client/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/gilad/code/commitmuse/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/Users/gilad/code/commitmuse/client/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useLayoutEffect,useState}from'react';import'./style.scss';import PageHeader from'../../../../modules/common/PageHeader';import Icon from'../../../../components/Icon';import{notEmptyArray}from'../../../../../helpers/base';import IsaService from'../../../../../services/isa.service';import PageContent from'../../../../modules/common/PageContent';import{Link}from'react-router-dom';import IsaStatus from'../../../../modules/company/MyIsa/IsaStatus';import Select from'../../../../components/Select/Select';import Message from'../../../../components/Message';import Loader from'../../../../components/Loader';var isaService=new IsaService();export default function MyIsa(props){var _useState=useState(''),_useState2=_slicedToArray(_useState,2),filter=_useState2[0],set_filter=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),isas=_useState4[0],set_isas=_useState4[1];var _useState5=useState(''),_useState6=_slicedToArray(_useState5,2),request_error=_useState6[0],set_request_error=_useState6[1];var _useState7=useState(true),_useState8=_slicedToArray(_useState7,2),loading=_useState8[0],set_loading=_useState8[1];var getIsas=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var res;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:set_loading(true);_context.prev=1;_context.next=4;return isaService.getIsas();case 4:res=_context.sent;if(!res.error){_context.next=9;break;}set_loading(false);set_request_error(res.error);return _context.abrupt(\"return\",setTimeout(function(){return set_request_error('');},3000));case 9:set_loading(false);set_isas(res);_context.next=18;break;case 13:_context.prev=13;_context.t0=_context[\"catch\"](1);set_loading(false);set_request_error(_context.t0.error||_context.t0.toString());return _context.abrupt(\"return\",setTimeout(function(){return set_request_error('');},3000));case 18:case\"end\":return _context.stop();}}},_callee,null,[[1,13]]);}));return function getIsas(){return _ref.apply(this,arguments);};}();useLayoutEffect(function(){getIsas();},[]);return/*#__PURE__*/React.createElement(\"article\",{className:\"MyIsa-page\"},/*#__PURE__*/React.createElement(PageHeader,{user:props.currentUser}),loading?/*#__PURE__*/React.createElement(Loader,null):/*#__PURE__*/React.createElement(PageContent,null,/*#__PURE__*/React.createElement(\"header\",{className:\"page-header\"},/*#__PURE__*/React.createElement(\"h1\",{className:\"page-title\"},\"My ISA\\u2019s\"),notEmptyArray(isas)&&/*#__PURE__*/React.createElement(Select,{value:filter,options:['View all','active','paying','completed'],onChange:function onChange(e){return set_filter(e);},placeholder:'View all'})),notEmptyArray(isas)?/*#__PURE__*/React.createElement(\"section\",{className:\"my_isa\"},isas.filter(function(i){return i.status.includes(filter==='View all'?'':filter);}).map(function(isa,index){return/*#__PURE__*/React.createElement(IsaStatus,{onClick:function onClick(){return props.history.push('/isa/'+isa.id);},key:index,name:isa.student.first_name+' '+isa.student.last_name,status:isa.status});}),/*#__PURE__*/React.createElement(Link,{to:\"isa/create\",className:\"new_isa\"},/*#__PURE__*/React.createElement(Icon,{icon:\"new_isa_plus\"}),\"NEW ISA\")):/*#__PURE__*/React.createElement(\"section\",{className:\"empty-isa\"},/*#__PURE__*/React.createElement(\"div\",{className:\"icon\"},/*#__PURE__*/React.createElement(Icon,{icon:\"empty_isa\"})),/*#__PURE__*/React.createElement(\"h2\",null,\"You have no ISA offers.\"),/*#__PURE__*/React.createElement(\"div\",{className:\"text_with_icon\"},/*#__PURE__*/React.createElement(\"p\",null,\"Start by creating a new one.\"),/*#__PURE__*/React.createElement(Icon,{icon:\"arrow_to_button\"})),/*#__PURE__*/React.createElement(Link,{to:\"isa/create\",className:\"new_isa\"},/*#__PURE__*/React.createElement(Icon,{icon:\"new_isa_plus\"}),\"NEW ISA\"))),/*#__PURE__*/React.createElement(Message,{message:request_error}));}","map":{"version":3,"sources":["/Users/gilad/code/commitmuse/client/src/app/pages/public/company/my-isa/index.tsx"],"names":["React","useLayoutEffect","useState","PageHeader","Icon","notEmptyArray","IsaService","PageContent","Link","IsaStatus","Select","Message","Loader","isaService","MyIsa","props","filter","set_filter","isas","set_isas","request_error","set_request_error","loading","set_loading","getIsas","res","error","setTimeout","toString","currentUser","e","i","status","includes","map","isa","index","history","push","id","student","first_name","last_name"],"mappings":"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","sourcesContent":["import React, { useLayoutEffect, useState } from 'react'\nimport './style.scss'\nimport { ScreenProps } from '../../../../../interfaces/baseIntefaces'\nimport PageHeader from '../../../../modules/common/PageHeader'\nimport Icon from '../../../../components/Icon'\nimport { notEmptyArray } from '../../../../../helpers/base'\nimport IsaService from '../../../../../services/isa.service'\nimport PageContent from '../../../../modules/common/PageContent'\nimport { Link } from 'react-router-dom'\nimport IsaStatus from '../../../../modules/company/MyIsa/IsaStatus'\nimport Select from '../../../../components/Select/Select'\nimport Message from '../../../../components/Message'\nimport Loader from '../../../../components/Loader'\n\nconst isaService = new IsaService()\n\ninterface MyIsa extends ScreenProps {}\n\nexport default function MyIsa(props: MyIsa) {\n  const [filter, set_filter] = useState('')\n  const [isas, set_isas] = useState<any[]>([])\n  const [request_error, set_request_error] = useState('')\n  const [loading, set_loading] = useState(true)\n\n  const getIsas = async () => {\n    set_loading(true)\n\n    try {\n      const res = await isaService.getIsas()\n\n      if (res.error) {\n        set_loading(false)\n        set_request_error(res.error)\n        return setTimeout(() => set_request_error(''), 3000)\n      }\n      set_loading(false)\n      set_isas(res)\n    } catch (e) {\n      set_loading(false)\n      set_request_error(e.error || e.toString())\n      return setTimeout(() => set_request_error(''), 3000)\n    }\n  }\n\n  useLayoutEffect(() => {\n    getIsas()\n  }, [])\n\n  return (\n    <article className=\"MyIsa-page\">\n      <PageHeader user={props.currentUser} />\n      {loading ? (\n        <Loader />\n      ) : (\n        <PageContent>\n          <header className=\"page-header\">\n            <h1 className=\"page-title\">My ISAâ€™s</h1>\n            {notEmptyArray(isas) && (\n              <Select\n                value={filter}\n                options={['View all', 'active', 'paying', 'completed']}\n                onChange={e => set_filter(e)}\n                placeholder={'View all'}\n              />\n            )}\n          </header>\n          {notEmptyArray(isas) ? (\n            <section className=\"my_isa\">\n              {isas\n                .filter((i: any) => i.status.includes(filter === 'View all' ? '' : filter))\n                .map((isa: any, index: number) => (\n                  <IsaStatus\n                    onClick={() => props.history.push('/isa/' + isa.id)}\n                    key={index}\n                    name={isa.student.first_name + ' ' + isa.student.last_name}\n                    status={isa.status}\n                  />\n                ))}\n              <Link to=\"isa/create\" className=\"new_isa\">\n                <Icon icon=\"new_isa_plus\" />\n                NEW ISA\n              </Link>\n            </section>\n          ) : (\n            <section className=\"empty-isa\">\n              <div className=\"icon\">\n                <Icon icon=\"empty_isa\" />\n              </div>\n              <h2>You have no ISA offers.</h2>\n              <div className=\"text_with_icon\">\n                <p>Start by creating a new one.</p>\n                <Icon icon=\"arrow_to_button\" />\n              </div>\n              <Link to=\"isa/create\" className=\"new_isa\">\n                <Icon icon=\"new_isa_plus\" />\n                NEW ISA\n              </Link>\n            </section>\n          )}\n        </PageContent>\n      )}\n      <Message message={request_error} />\n    </article>\n  )\n}\n"]},"metadata":{},"sourceType":"module"}